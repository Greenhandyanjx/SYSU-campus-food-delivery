# ğŸ± ä¸­ç å¤–å–æ ¡å›­é€ç³»ç»Ÿ æ¥å£æ–‡æ¡£ (å€ŸåŠ© ai ç”Ÿæˆæ ¼å¼ï¼Œå…·ä½“çš„æ¥å£åœ¨å¼€å‘è¿‡ç¨‹ä¸­è‡ªè¡Œæ›´æ–°)

> **ç‰ˆæœ¬**ï¼šv1.0  
> **åç«¯æŠ€æœ¯æ ˆ**ï¼šGo (Gin + GORM)  
> **å‰ç«¯æŠ€æœ¯æ ˆ**ï¼šVue3 + Vite + Element Plus  
> **æœ€åæ›´æ–°**ï¼š2025-10-05 (å€ŸåŠ© ai ç”Ÿæˆæ ¼å¼ï¼Œå…·ä½“çš„)

## ğŸ” é€šç”¨è¯´æ˜

### æ¥å£å‰ç¼€

```
/api
```

### è¯·æ±‚å¤´è§„èŒƒ

| å‚æ•°            | è¯´æ˜                                    | æ˜¯å¦å¿…é¡»   |
| --------------- | --------------------------------------- | ---------- |
| `Content-Type`  | application/json æˆ– multipart/form-data | æ˜¯         |
| `Authorization` | Bearer + ç©ºæ ¼ + Token                   | ç™»å½•åå¿…å¡« |

### ç»Ÿä¸€è¿”å›æ ¼å¼

```json
{
  "code": 0,
  "msg": "success",
  "data": {}
}
```

| å­—æ®µ   | ç±»å‹   | è¯´æ˜               |
| ------ | ------ | ------------------ |
| `code` | int    | çŠ¶æ€ç ï¼Œ0 è¡¨ç¤ºæˆåŠŸ |
| `msg`  | string | æç¤ºä¿¡æ¯           |
| `data` | object | è¿”å›æ•°æ®ä¸»ä½“       |

---

# ğŸ‘¤ ç”¨æˆ·ç«¯æ¥å£ï¼ˆUser APIï¼‰

---

## 1. ç”¨æˆ·è®¤è¯ä¸ä¿¡æ¯

### ğŸŸ¢ æ³¨å†Œ

**POST** `/user/register`

**è¯·æ±‚å‚æ•°**

```json
{
  "username": "å¼ ä¸‰",
  "password": "123456",
  "phone": "18888888888"
}
```

**è¿”å›ç¤ºä¾‹**

```json
{
  "code": 0,
  "msg": "æ³¨å†ŒæˆåŠŸ"
}
```

---

### ğŸŸ¢ ç™»å½•

**POST** `/user/login`

**è¯·æ±‚å‚æ•°**

```json
{
  "username": "å¼ ä¸‰",
  "password": "123456"
}
```

**è¿”å›ç¤ºä¾‹**

```json
{
  "code": 0,
  "msg": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5..."
  }
}
```

---

### ğŸŸ¢ è·å–ç”¨æˆ·ä¿¡æ¯

**GET** `/user/info`

**è¿”å›ç¤ºä¾‹**

```json
{
  "code": 0,
  "data": {
    "id": 101,
    "username": "å¼ ä¸‰",
    "phone": "18888888888",
    "balance": 50.0,
    "points": 120
  }
}
```

---

## 2. å•†å®¶ä¸å•†å“æµè§ˆ

### ğŸŸ¢ è·å–å•†å®¶åˆ—è¡¨

**GET** `/shops`

**è¿”å›ç¤ºä¾‹**

```json
{
  "code": 0,
  "data": [
    {
      "id": 1,
      "name": "è€æé¥­å ‚",
      "rating": 4.6,
      "delivery_fee": 2.0
    }
  ]
}
```

---

### ğŸŸ¢ è·å–å•†å®¶èœå•

**GET** `/shop/:id/menu`

**è¿”å›ç¤ºä¾‹**

```json
{
  "code": 0,
  "data": [
    {
      "id": 1,
      "name": "å®«ä¿é¸¡ä¸",
      "price": 16.0,
      "stock": 20,
      "img_url": "/upload/menu/1.jpg"
    }
  ]
}
```

---

## 3. è´­ç‰©è½¦ä¸ä¸‹å•

### ğŸŸ¢ æ·»åŠ åˆ°è´­ç‰©è½¦

**POST** `/cart/add`

```json
{
  "food_id": 1,
  "quantity": 2
}
```

**è¿”å›**

```json
{
  "code": 0,
  "msg": "å·²åŠ å…¥è´­ç‰©è½¦"
}
```

---

### ğŸŸ¢ æäº¤è®¢å•

**POST** `/order/create`

```json
{
  "shop_id": 1,
  "items": [{ "food_id": 1, "quantity": 2 }],
  "delivery_time": "2025-10-05T12:15:00"
}
```

**è¿”å›**

```json
{
  "code": 0,
  "data": { "order_id": 10086 }
}
```

---

### ğŸŸ¢ å®æ—¶è¿½è¸ªéª‘æ‰‹ä½ç½®

**GET** `/order/:id/tracking`

**è¿”å›**

```json
{
  "code": 0,
  "data": {
    "rider_id": 9,
    "latitude": 22.2556,
    "longitude": 113.5408,
    "status": "é…é€ä¸­"
  }
}
```

---

### ğŸŸ¢ ç”¨æˆ·ç¡®è®¤æ”¶è´§

**POST** `/order/:id/confirm`

```json
{
  "rating": 5,
  "comment": "éª‘æ‰‹å¾ˆå¿«é€åˆ°ï¼"
}
```

**è¿”å›**

```json
{
  "code": 0,
  "msg": "ç¡®è®¤æ”¶è´§æˆåŠŸ"
}
```

---

# ğŸš´â€â™‚ï¸ éª‘æ‰‹ç«¯æ¥å£ï¼ˆRider APIï¼‰

---

## 1. éª‘æ‰‹ç™»å½•ä¸ä¿¡æ¯ç®¡ç†

### ğŸŸ¢ éª‘æ‰‹ç™»å½•

**POST** `/rider/login`

```json
{
  "username": "rider01",
  "password": "123456"
}
```

**è¿”å›**

```json
{
  "code": 0,
  "data": { "token": "rider_token_abc123" }
}
```

---

### ğŸŸ¢ è·å–ä¸ªäººä¿¡æ¯

**GET** `/rider/info`

**è¿”å›**

```json
{
  "code": 0,
  "data": {
    "id": 5,
    "name": "ææ˜",
    "credit_score": 98,
    "today_orders": 6
  }
}
```

---

## 2. æ¥å•ä¸é…é€

### ğŸŸ¢ æŸ¥çœ‹å¾…æ¥è®¢å•

**GET** `/rider/orders/available`

**è¿”å›**

```json
{
  "code": 0,
  "data": [
    {
      "order_id": 2001,
      "pickup_point": "ä¸œåŒºé¥­å ‚",
      "dropoff_point": "çŸ¥è¡Œè‹‘",
      "expected_time": "12:25",
      "status": "compeleted",
      "total_price": "20"
    }
  ]
}
```

---

### ğŸŸ¢ ä¸Šä¼ é€è¾¾å‡­è¯

**POST** `/rider/order/:id/delivery-proof`

**å‚æ•°ç±»å‹**ï¼š`multipart/form-data`
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `photo` | file | é€è¾¾ç…§ç‰‡ |

**è¿”å›**

```json
{
  "code": 0,
  "msg": "é€è¾¾å‡­è¯ä¸Šä¼ æˆåŠŸ"
}
```

---

### ğŸŸ¢ å®Œæˆè®¢å•

**POST** `/rider/order/:id/finish`

**è¿”å›**

```json
{
  "code": 0,
  "msg": "è®¢å•å·²å®Œæˆ"
}
```

---

# ğŸª å•†å®¶ç«¯æ¥å£ï¼ˆMerchant APIï¼‰

---

## 1. ç™»å½•ä¸ä¿¡æ¯ç®¡ç†

### ğŸŸ¢ å•†å®¶ç™»å½•

**POST** `/merchant/login`

```json
{
  "username": "canteenA",
  "password": "123456"
}
```

**è¿”å›**

```json
{
  "code": 0,
  "data": { "token": "merchant_token_abc123" }
}
```

---

### ğŸŸ¢ è·å–å•†å®¶ä¿¡æ¯

**GET** `/merchant/info`

**è¿”å›**

```json
{
  "code": 0,
  "data": {
    "id": 1,
    "name": "ä¸­å¤§é¥­å ‚",
    "status": "è¥ä¸šä¸­",
    "menu_count": 32
  }
}
```

---

## 2. èœå“ç®¡ç†

### ğŸŸ¢ æ–°å¢èœå“

**POST** `/merchant/menu/add`

```json
{
  "name": "é¦™è‡æ»‘é¸¡é¥­",
  "price": 15,
  "stock": 50,
  "img_url": "/upload/menu/123.jpg"
}
```

**è¿”å›**

```json
{
  "code": 0,
  "msg": "èœå“æ·»åŠ æˆåŠŸ"
}
```

---

### ğŸŸ¢ ä¿®æ”¹èœå“

**PUT** `/merchant/menu/:id`

```json
{
  "price": 16,
  "stock": 30
}
```

**è¿”å›**

```json
{
  "code": 0,
  "msg": "èœå“ä¿¡æ¯å·²æ›´æ–°"
}
```

---

## 3. è®¢å•ç®¡ç†

### ğŸŸ¢ æŸ¥çœ‹è®¢å•åˆ—è¡¨

**GET** `/merchant/orders`

**è¿”å›**

```json
{
  "code": 0,
  "data": [
    {
      "order_id": 1010,
      "status": "åˆ¶ä½œä¸­",
      "user_name": "å¼ ä¸‰",
      "total_price": 28.0
    }
  ]
}
```

---

### ğŸŸ¢ æ›´æ–°è®¢å•çŠ¶æ€

**PUT** `/merchant/order/:id/status`

```json
{
  "status": "å·²å®Œæˆ"
}
```

**è¿”å›**

```json
{
  "code": 0,
  "msg": "çŠ¶æ€æ›´æ–°æˆåŠŸ"
}
```

---

# âš™ï¸ é”™è¯¯ç è¯´æ˜

| code | å«ä¹‰                |
| ---- | ------------------- |
| 0    | æˆåŠŸ                |
| 400  | å‚æ•°é”™è¯¯            |
| 401  | æœªç™»å½•æˆ– Token å¤±æ•ˆ |
| 403  | æ— æƒé™              |
| 404  | æ•°æ®ä¸å­˜åœ¨          |
| 500  | æœåŠ¡å™¨é”™è¯¯          |

---

# ğŸ§­ é™„å½•

- **æ¥å£æµ‹è¯•å·¥å…·æ¨è**ï¼šApifox / Postman
- **æ¥å£é‰´æƒæ–¹å¼**ï¼šJWTï¼ˆHeader ä¸­æºå¸¦ Authorizationï¼‰
- **å®æ—¶æ¨é€åè®®**ï¼šWebSocketï¼ˆä½ç½®è¿½è¸ªã€è®¢å•çŠ¶æ€æ›´æ–°ï¼‰
- **æ–‡ä»¶ä¸Šä¼ æ ¼å¼**ï¼šmultipart/form-data
