# 📋 SYSU校园外卖系统 - 项目配置说明

## 🚀 快速开始

### 前端配置

1. **复制环境配置文件**
   ```bash
   cd frontend
   cp .env.example .env.development
   ```

2. **编辑 `.env.development` 文件**
   - 直接使用提供的测试密钥：
   ```
   VITE_AMAP_KEY=e3064e9e20ff62d8ebb59d24d634c179
   VITE_AMAP_SECURITY_CODE=4bf89c4e16d60340e676f6cc39beff32
   ```
   - 或替换为自己的高德地图API密钥

3. **启动前端服务**
   ```bash
   cd frontend
   npm install
   npm run dev
   ```

### 后端配置

1. **安装依赖**
   ```bash
   cd backend
   go mod tidy
   ```

2. **配置数据库**
   - 确保 MySQL 数据库已安装
   - 修改数据库连接配置

3. **启动后端服务**
   ```bash
   cd backend
   go run main.go
   ```

## 🔧 高德地图API配置

### 已配置的测试密钥
- **主密钥**: `e3064e9e20ff62d8ebb59d24d634c179`
- **备用密钥**: `4ba8ba0b6cc65d2f3258e44bb196a8c5`
- **安全码**: `4bf89c4e16d60340e676f6cc39beff32`

### 使用说明
- ✅ 前端：地图显示、地址搜索
- ✅ 后端：地理编码、距离计算
- 🔧 自动故障切换：主密钥失败时使用备用密钥

### 注册自己的API密钥
1. 访问 [高德开放平台](https://lbs.amap.com/)
2. 注册开发者账号
3. 创建应用并绑定服务
4. 开启 "Web服务API" 权限
5. 设置域名/IP白名单

## 📍 核心功能配置

### 距离校验功能
- **范围**: 1公里内允许送达
- **骑手定位**: 自动追踪位置
- **地址解析**: 高德地图API自动解析

### 定位服务
- **前端**: 每15秒上报位置
- **后端**: 位置验证和距离计算
- **精度**: 20米变化立即上报

## 🎯 用户角色配置

### 骑手端
- **登录地址**: `/rider/login`
- **主页**: `/rider/dashboard`
- **进行中订单**: `/rider/ongoing`

### 用户端
- **登录地址**: `/login`
- **菜单**: `/user/store`
- **购物车**: `/user/cart`

### 商家端
- **登录地址**: `/merchant/login`
- **订单管理**: `/merchant/orders`

## ⚠️ 重要注意事项

### 开发环境
- 使用测试密钥进行开发
- 不要将包含真实密钥的 `.env` 文件提交到版本控制
- 建议定期更新API密钥

### 生产环境
- 必须注册自己的高德地图应用
- 设置适当的域名白名单
- 监控API使用量和配额

### 安全配置
- 数据库连接安全
- API权限控制
- 用户认证机制

## 🐛 常见问题

### Q: 高德地图API无法使用？
**A**:
1. 检查网络连接
2. 验证API密钥有效性
3. 确认服务权限已开启
4. 检查域名/IP白名单设置

### Q: 距离校验不生效？
**A**:
1. 确认骑手位置权限已开启
2. 检查浏览器定位设置
3. 重启后端服务
4. 查看控制台错误日志

### Q: 无法连接数据库？
**A**:
1. 确认数据库服务已启动
2. 检查连接字符串配置
3. 验证数据库权限
4. 检查防火墙设置

## 📞 技术支持

如遇到问题，请检查：
1. 控制台错误日志
2. 网络请求响应
3. 环境配置文件
4. API服务状态

---

**项目地址**: SYSU-campus-food-delivery
**技术栈**: Vue3 + Go + MySQL + 高德地图API